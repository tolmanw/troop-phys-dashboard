name: Check Strava Private Access

# Trigger manually
on:
  workflow_dispatch:

jobs:
  check_access:
    runs-on: ubuntu-latest

    steps:
      # Step 1: Checkout repo
      - name: Checkout repository
        uses: actions/checkout@v3

      # Step 2: Set up Python
      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: "3.11"

      # Step 3: Install dependencies
      - name: Install dependencies
        run: pip install requests

      # Step 4: Run the Strava private access check
      - name: Run Strava private access check
        run: python check_private_access.py
        env:
          STRAVA_CLIENT_ID: ${{ secrets.STRAVA_CLIENT_ID }}
          STRAVA_CLIENT_SECRET: ${{ secrets.STRAVA_CLIENT_SECRET }}
          STRAVA_REFRESH_TOKENS: ${{ secrets.STRAVA_REFRESH_TOKENS }}
          ATHLETE_ALIASES: ${{ secrets.ATHLETE_ALIASES }}
